{% load static %}
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>家务服务用户门户</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="shortcut icon" href="{% static 'assets/img/favicon.png' %}" type="image/x-icon">

    <!--Basic Styles-->
    <link href="{% static 'assets/css/bootstrap.min.css' %}" rel="stylesheet" />
    <link href="{% static 'assets/css/font-awesome.min.css' %}" rel="stylesheet" />

    <!--Beyond styles-->
    <link href="{% static 'assets/css/beyond.min.css' %}" rel="stylesheet" />
    <link href="{% static 'assets/css/demo.min.css' %}" rel="stylesheet" />
    <link href="{% static 'assets/css/animate.min.css' %}" rel="stylesheet" />
</head>
<body>
    <!-- 加载效果 -->
    <div class="loading-container">
        <div class="loading-progress">
            <div class="rotator">
                <div class="rotator">
                    <div class="rotator colored">
                        <div class="rotator">
                            <div class="rotator colored">
                                <div class="rotator colored"></div>
                                <div class="rotator"></div>
                            </div>
                            <div class="rotator colored"></div>
                        </div>
                        <div class="rotator"></div>
                    </div>
                    <div class="rotator"></div>
                </div>
                <div class="rotator"></div>
            </div>
            <div class="rotator"></div>
        </div>
    </div>
    <!-- 主导航栏容器 -->
    <div class="navbar">
        <!-- 导航栏内层包裹 -->
        <div class="navbar-inner">
            <!-- 导航栏内容容器 -->
            <div class="navbar-container">
                <!-- 品牌标识区 (左侧) -->
                <div class="navbar-header pull-left">
                    <a href="#" class="navbar-brand">
                        <small>
                            <img src="{% static 'assets/img/logo.png' %}" alt="家务服务预约系统" />
                        </small>
                    </a>
                </div>

                <!-- 侧边栏折叠控制 -->
                <div class="sidebar-collapse" id="sidebar-collapse">
                    <!-- 汉堡菜单图标 -->
                    <i class="collapse-icon fa fa-bars"></i>
                </div>

                <!-- 右侧功能区 -->
                <div class="navbar-header pull-right">
                    <div class="navbar-account">
                        <ul class="account-area">
                            <!-- 用户账户管理 -->
                            <li>
                                <!-- 用户信息展示 -->
                                <a class="login-area dropdown-toggle" data-toggle="dropdown">
                                    <div class="avatar">
                                        <img src="{% static user_info.avatar %}">
                                    </div>
                                    <section>
                                        <h2><span class="profile"><span>{{ user_info.nickname }}</span></span></h2>
                                    </section>
                                </a>
                                <!-- 账户设置面板 -->
                                <ul class="dropdown-menu dropdown-login-area">
                                    <!-- 个人资料链接 -->
                                    <li class="edit">
                                <a href="{% url 'user_profile' %}" class="pull-left">个人资料</a>
                                    </li>
                                    <!-- 主题选择 -->
                                    <li class="theme-area"><a>主题色选择</a>
                                        <ul class="colorpicker" id="skin-changer">
                                            <li><a class="colorpick-btn" href="#" style="background-color:#5DB2FF;" rel="assets/css/skins/blue.min.css"></a></li>
                                            <li><a class="colorpick-btn" href="#" style="background-color:#2dc3e8;" rel="assets/css/skins/azure.min.css"></a></li>
                                            <li><a class="colorpick-btn" href="#" style="background-color:#03B3B2;" rel="assets/css/skins/teal.min.css"></a></li>
                                            <li><a class="colorpick-btn" href="#" style="background-color:#53a93f;" rel="assets/css/skins/green.min.css"></a></li>
                                            <li><a class="colorpick-btn" href="#" style="background-color:#FF8F32;" rel="assets/css/skins/orange.min.css"></a></li>
                                            <li><a class="colorpick-btn" href="#" style="background-color:#cc324b;" rel="assets/css/skins/pink.min.css"></a></li>
                                            <li><a class="colorpick-btn" href="#" style="background-color:#AC193D;" rel="assets/css/skins/darkred.min.css"></a></li>
                                            <li><a class="colorpick-btn" href="#" style="background-color:#8C0095;" rel="assets/css/skins/purple.min.css"></a></li>
                                            <li><a class="colorpick-btn" href="#" style="background-color:#0072C6;" rel="assets/css/skins/darkblue.min.css"></a></li>
                                            <li><a class="colorpick-btn" href="#" style="background-color:#585858;" rel="assets/css/skins/gray.min.css"></a></li>
                                            <li><a class="colorpick-btn" href="#" style="background-color:#474544;" rel="assets/css/skins/black.min.css"></a></li>
                                            <li><a class="colorpick-btn" href="#" style="background-color:#001940;" rel="assets/css/skins/deepblue.min.css"></a></li>
                                        </ul>
                                    </li>
                                    <!-- 退出登录 -->
                                    <li class="dropdown-footer">
                                        <a href="{% url 'logout' %}"> 退出登录</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 主容器 -->
    <div class="main-container container-fluid">
        <div class="page-container">
            <!-- 页面侧边栏 -->
            <div class="page-sidebar" id="sidebar">
                <!-- 侧边栏菜单 -->
                <ul class="nav sidebar-menu">
                    <!-- 1. 我的订单 -->
                    <li>
                        <a href="#" class="menu-dropdown">
                            <i class="menu-icon fa fa-shopping-cart"></i>
                            <span class="menu-text">我的订单</span>
                            <i class="menu-expand"></i>
                        </a>
                        <ul class="submenu">
                            <li>
                                <a href="#">
                                    <span class="menu-text">进行中</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <span class="menu-text">历史订单</span>
                                </a>
                            </li>
                        </ul>
                    </li>

                    <!-- 2. 预约服务 -->
                    <li>
                        <a href="#" class="menu-dropdown">
                            <i class="menu-icon fa fa-calendar-check-o"></i>
                            <span class="menu-text">预约服务</span>
                            <i class="menu-expand"></i>
                        </a>
                        <ul class="submenu">
                            <li>
                                <a href="#">
                                    <span class="menu-text">快速预约</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <span class="menu-text">服务收藏夹</span>
                                </a>
                            </li>
                        </ul>
                    </li>

                    <!-- 3. 地址管理 -->
                    <li>
                        <a href="#" class="menu-dropdown">
                            <i class="menu-icon fa fa-map-marker"></i>
                            <span class="menu-text">地址管理</span>
                            <i class="menu-expand"></i>
                        </a>
                        <ul class="submenu">
                            <li>
                                <a href="#">
                                    <span class="menu-text">我的地址簿</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <span class="menu-text">常用地址推荐</span>
                                </a>
                            </li>
                        </ul>
                    </li>

                    <!-- 4. 售后服务 -->
                    <li>
                        <a href="#" class="menu-dropdown">
                            <i class="menu-icon fa fa-headphones"></i>
                            <span class="menu-text">售后服务</span>
                            <i class="menu-expand"></i>
                        </a>
                        <ul class="submenu">
                            <li>
                                <a href="#">
                                    <span class="menu-text">申请退款</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <span class="menu-text">申请返工</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <span class="menu-text">投诉建议</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <span class="menu-text">进度查询</span>
                                </a>
                            </li>
                        </ul>
                    </li>

                    <!-- 5. 我的评价 -->
                    <li>
                        <a href="#" class="menu-dropdown">
                            <i class="menu-icon fa fa-star"></i>
                            <span class="menu-text">我的评价</span>
                            <i class="menu-expand"></i>
                        </a>
                        <ul class="submenu">
                            <li>
                                <a href="#">
                                    <span class="menu-text">待评价订单</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <span class="menu-text">评价历史记录</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <span class="menu-text">精选评价展示</span>
                                </a>
                            </li>
                        </ul>
                    </li>

                    <!-- 6. 账户中心 -->
                    <li>
                        <a href="#" class="menu-dropdown">
                            <i class="menu-icon fa fa-user-circle"></i>
                            <span class="menu-text">账户中心</span>
                            <i class="menu-expand"></i>
                        </a>
                        <ul class="submenu">
                            <li>
                                <a href="#">
                                    <a href="{% url 'user_profile' %}"><span class="menu-text">个人信息</span></a>
                                    <small class="badge badge-success">已认证</small>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <span class="menu-text">安全设置</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <span class="menu-text">服务者认证</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            
            <!-- Page Content -->
            <div class="page-content">
                <!-- Page Header -->
                <div class="page-header position-relative">
                    <div class="header-title">
                        <h1>
                            欢迎回来，<span>{{ user_info.nickname }}</span>
                        </h1>
                    </div>
                </div>
                <!-- /Page Header -->
                
                <!-- Page Body -->
                <div class="page-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="widget">
                                <div class="widget-header">
                                    <i class="widget-icon fa fa-tasks"></i>
                                    <span class="widget-caption">待处理订单</span>
                                </div>
                                <div class="widget-body">
                                    <p>这里显示用户最近的待处理订单...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /Page Body -->
            </div>
            <!-- /Page Content -->
        </div>
    </div>
    

    <!--Basic Scripts-->
    <script src="{% static 'assets/js/jquery-2.0.3.min.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap.min.js' %}"></script>

    <!--Cookie Script-->
    <script src="{% static 'assets/js/cookie.js' %}"></script>

    <!--Beyond Scripts-->
    <script src="{% static 'assets/js/beyond.min.js' %}"></script>
    
    <!-- 页面跳转处理 -->
    <script>
    $(document).ready(function() {
        // 拦截所有菜单链接点击
        $('.sidebar-menu a[href$=".html"]').on('click', function(e) {
            e.preventDefault();
            var url = $(this).attr('href');
            
            // 显示加载动画
            $('.loading-container').show();
            
            // AJAX加载目标页面
            $.ajax({
                url: url,
                type: 'GET',
                success: function(data) {
                    // 提取目标页面的Page Content部分
                    var content = $(data).filter('.page-content').html();
                    
                    // 替换当前页面的Page Content
                    $('.page-content').html(content);
                    
                    // 隐藏加载动画
                    $('.loading-container').hide();
                    
                    // 更新浏览器地址栏
                    history.pushState(null, null, url);
                },
                error: function() {
                    $('.loading-container').hide();
                    alert('页面加载失败');
                }
            });
        });
        
        // 处理浏览器前进/后退
        window.onpopstate = function() {
            location.reload();
        };
    });
    </script>
</body>
</html>
